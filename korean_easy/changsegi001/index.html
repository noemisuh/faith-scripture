<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ì°½ì„¸ê¸° 1ì¥ | ì‰¬ìš´ì„±ê²½</title>
<style>
  :root{
    --text:#222;--line:#e6e6e6;--panel:#fafafa;
    --page-max:1200px;--page-pad:20px;--bar-max:1200px;--bar-pad:16px;
    /* ìš°ì¸¡ ë³´ì¡°ì¹¸ í­(ê³¼ë„ í™•ì¥ ë°©ì§€) */
    --archive-width: clamp(360px, 30vw, 480px);
  }
  body{margin:0;background:#fff;color:var(--text);font-family:"Malgun Gothic",sans-serif;-webkit-user-select:none;user-select:none;}

  .top-space{height:48px;}
  .bar{max-width:var(--bar-max);margin:0 auto;padding:0 var(--bar-pad);}
  .topbar{display:flex;justify-content:space-between;align-items:center;gap:10px;}
  .left,.right{display:flex;align-items:center;gap:8px;}
  .icon{font-size:18px;}
  /* í°ìƒ‰ ë‹ë³´ê¸° */
  .icon.search-icon{display:inline-flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:6px;background:#222;color:#fff}
  .icon.search-icon svg{width:18px;height:18px;display:block}

  /* ëª©ì°¨/ê²€ìƒ‰ í­(ì¤„ì¸ ê°’) */
  .book{width:105px;padding:6px 8px;border:1px solid #ccc;border-radius:4px}
  .chap{width:30px;padding:6px 8px;border:1px solid #ccc;border-radius:4px;text-align:center}
  .search{width:120px;padding:6px 8px;border:1px solid #ccc;border-radius:4px}
  .search2{width:134px;padding:6px 8px;border:1px solid #ccc;border-radius:4px}

/* ì œëª© ì•„ë˜ ì—¬ë°± */
.title-pack h1{
  margin:4px 0 16px;           /* ì•„ë˜ë¡œ 12px ë„ìš°ê¸° */
  font-size:30px;
  font-weight:800;
  line-height:1.15;
}

/* ì œëª© ì•„ë˜ ì¢Œ/ìš° í™”ì‚´í‘œ */
.ch-arrows{
  display:flex;
  justify-content:center;
  gap:16px;
  margin-top:4px;
}
.ch-arrows .arrow{
  width:38px; height:38px;
  display:inline-flex; align-items:center; justify-content:center;
  border:1px solid #d0d0d0; border-radius:10px;
  background:#fff; color:#444; text-decoration:none;
  font-size:22px; line-height:1;
  box-shadow:0 2px 6px rgba(0,0,0,.05);
}
.ch-arrows .arrow:hover{ background:#f6f7fb }
.ch-arrows .arrow:focus{ outline:2px solid #a9c7ff }
.ch-arrows .arrow.disabled{ opacity:.45; pointer-events:none }
  
  .divider{border:0;border-top:1px solid var(--line);margin:12px 0 18px;}
  .page{width:min(92vw,var(--page-max));margin:0 auto;padding:0 var(--page-pad);}
  .title-band{display:flex;justify-content:center;margin-bottom:14px;}
  .title-pack{display:inline-block;text-align:center;}
  
  .nav-under {
    display: flex;
    justify-content: center;
    gap: 24px;
    margin-top: 8px;
  }
  .nav-btn {
    display: inline-flex;        /* a íƒœê·¸ë„ ë²„íŠ¼ì²˜ëŸ¼ ì •ë ¬ */
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    color: #888;
    font-size: 20px;
    cursor: pointer;
    text-decoration: none;       /* a íƒœê·¸ ë°‘ì¤„ ì œê±° */
  }
  .nav-btn:focus {
    outline: 2px solid #cfe0ff;
    border-radius: 6px;
  }

  /* ë³¸ë¬¸ 1fr + ë³´ì¡°ì¹¸ ê³ ì •í­ */
  .wrap{max-width:1200px;margin:0 auto 90px;display:grid;grid-template-columns:minmax(0,1fr) var(--archive-width);gap:24px;align-items:flex-start}
  .col-left{min-width:0}
  aside.col-right{width:var(--archive-width);min-width:0;display:flex;flex-direction:column;gap:14px}
  @media (max-width:960px){.wrap{grid-template-columns:1fr}aside.col-right{width:auto}}

  .version{display:block;margin:2px 0 12px;text-align:left}
  .tip{position:relative;display:inline-block;cursor:help;font-weight:700;border:1px solid #bbb;border-radius:50%;width:18px;height:18px;line-height:16px;text-align:center;font-size:12px;color:#555}
  .tip:hover::after{content:"ë§ì”€: ë‚˜ì¤‘ì— ì±„ì›€\aí•„ì‚¬ì¹¸: ë¶™ì—¬ë„£ê¸° ë°©ì§€\aë³´ì¡°ì¹¸: ììœ í¸ì§‘, â–²â–¼ë¡œ ë†’ì´ ì¡°ì ˆ";white-space:pre;position:absolute;left:22px;top:-4px;background:#333;color:#fff;padding:8px 10px;border-radius:6px;font-size:12px;z-index:10}
  .panel{background:var(--panel);border:1px solid #d8d8d8;border-radius:8px;overflow:hidden}
  .panel .ph{display:flex;justify-content:space-between;align-items:center;padding:8px 10px;border-bottom:1px solid #eaeaea;background:#f6f6f6;font-weight:700;font-size:13px}
  .panel .ph .btns button{border:none;background:transparent;cursor:pointer;font-size:12px;color:#666;padding:2px 4px}
  .panel .body{padding:10px;min-height:100px}
  .panel .body[contenteditable="true"]{outline:none}

  /* ===== MENU START: ê³µí†µ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ===== */
  .menu{position:relative}
  .menu-btn{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;border:1px solid #ddd;border-radius:8px;background:#fff;color:#444;cursor:pointer;font-size:18px}
  .menu.open .menu-btn{background:#111;color:#fff;border-color:#111}
  .menu-list{position:absolute;right:0;top:38px;min-width:220px;background:#fff;border:1px solid #e5e7eb;border-radius:10px;box-shadow:0 12px 28px rgba(0,0,0,.12);padding:6px;display:none;z-index:1000}
  .menu.open .menu-list{display:block}
  .menu-group{padding:6px 6px 4px;font-size:12px;color:#6b7280}
  .menu-item{display:flex;align-items:center;gap:8px;width:100%;margin:2px 0;padding:8px 10px;border-radius:8px;border:0;background:#fff;color:#111;text-align:left;cursor:pointer;font-size:14px}
  .menu-item:hover{background:#f3f4f6}
  .menu-item[disabled]{opacity:.5;cursor:not-allowed}
  .menu-sep{height:1px;background:#eee;margin:6px 4px}
  /* ===== MENU END ===== */

  /* ì•„ì¹´ì´ë¸Œ/ë¦¬ë¸Œë ˆ ê¸°ë³¸ ë†’ì´ */
  #archive{height:180px}
  #libre{min-height:280px}

  .placeholder{padding:12px;border:1px dashed #cfcfcf;border-radius:8px;color:#888;background:#fcfcfc}

  /* ë§ˆì´í¬ ë²„íŠ¼ + ë§í’ì„  */
  .mic{position:fixed;right:24px;bottom:24px;width:54px;height:54px;border:none;border-radius:50%;background:#2f2f2f;color:#fff;font-size:24px;box-shadow:0 6px 16px rgba(0,0,0,.25);cursor:pointer;z-index:999}
  .bubble{position:fixed;right:90px;bottom:32px;max-width:320px;background:#111;color:#fff;border-radius:12px;padding:8px 10px;font-size:13px;line-height:1.4;display:none;z-index:2000;pointer-events:none}
  .bubble.show,.bubble.live{display:block !important}

  textarea{width:100%;height:40px;margin-top:8px;padding:8px;font-size:15px;line-height:1.5;border:1px solid #cfcfcf;border-radius:6px;resize:vertical;font-family:inherit}
  textarea:focus{outline:2px solid #a9c7ff}
</style>
</head>
<body oncontextmenu="return false" ondragstart="return false">
<div class="top-space"></div>

<div class="bar">
  <div class="topbar">
    <div class="left">
      <span class="icon">ğŸ“–</span>
      <input class="book" type="text" value="ì°½ì„¸ê¸°" readonly>
      <input class="chap" type="text" value="1" readonly>
    </div>
    <div class="right">
      <span class="icon search-icon" aria-hidden="true" title="ë³¸ë¬¸ ê²€ìƒ‰">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="11" cy="11" r="7" fill="none" stroke="currentColor" stroke-width="2"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        </svg>
      </span>
      <input class="search"  type="text" placeholder="ë³¸ë¬¸ ê²€ìƒ‰">
      <input class="search2" type="text" placeholder="ì˜ˆ) ì‹­ìê°€ / ë¶€í™œ">

      <!-- ===== MENU START ===== -->
      <div class="menu" id="globalMenu">
        <button class="menu-btn" aria-label="ë©”ë‰´" title="ë©”ë‰´">â‹¯</button>
        <div class="menu-list" role="menu" aria-label="Global menu">
          <div class="menu-group">ì´ë™</div>
          <a class="menu-item" href="../../index.html" role="menuitem">ì¸ë±ìŠ¤</a>
          <a class="menu-item" href="../../index.html#langs" role="menuitem">ì–¸ì–´/ë²„ì „ ì„ íƒ</a>
          <div class="menu-sep"></div>

          <div class="menu-group">ë„êµ¬</div>
          <button class="menu-item" data-action="print" role="menuitem">ì¸ì‡„</button>
          <button class="menu-item" data-action="download" role="menuitem" disabled title="ë‹¤ìš´ë¡œë“œ(ìë¦¬ í™•ë³´)">ë‹¤ìš´ë¡œë“œ(ì¤€ë¹„ì¤‘)</button>
          <button class="menu-item" data-action="backup" role="menuitem" disabled title="ë°±ì—…/ë¶ˆëŸ¬ì˜¤ê¸°(ìë¦¬ í™•ë³´)">ë°±ì—…/ë¶ˆëŸ¬ì˜¤ê¸°(ì¤€ë¹„ì¤‘)</button>
          <div class="menu-sep"></div>

          <div class="menu-group">ë„ì›€ë§</div>
          <a class="menu-item" href="../../index.html#guide" role="menuitem">ì‚¬ìš©ì„¤ëª…ì„œ</a>
        </div>
      </div>
      <!-- ===== MENU END ===== -->
    </div>
  </div>
  <hr class="divider">
</div>

<div class="page">
  <div class="title-band">
    <div class="title-pack">
      <h1>ì°½ì„¸ê¸° 1ì¥</h1>
      <div class="ch-arrows" role="navigation" aria-label="ì¥ ì´ë™">
       <a id="prev" class="arrow" href="#" aria-label="ì´ì „ ì¥">â€¹</a>
       <a id="next" class="arrow" href="#" aria-label="ë‹¤ìŒ ì¥">â€º</a>
     </div>
  </div>

  <div class="wrap">
    <div class="col-left">
      <div class="version">ì‰¬ìš´ì„±ê²½ <span class="tip">?</span></div>
      <div id="verses" class="placeholder">
        â€» ì´ ì¥ì˜ ë§ì”€ì€ ì•„ì§ ë¹„ì›Œë‘ì—ˆìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— ê° ì ˆì„ ì¶”ê°€í•˜ê³  í•„ì‚¬ì¹¸ì„ ë¶™ì—¬ ë„£ìœ¼ì„¸ìš”.
      </div>
    </div>

    <aside class="col-right">
      <section id="archive" class="panel">
        <div class="ph">ì•„ì¹´ì´ë¸Œ
          <div class="btns">
            <button type="button" data-delta="-40" title="ìœ„ë¡œ ì¤„ì´ê¸°">â–²</button>
            <button type="button" data-delta="40"  title="ì•„ë˜ë¡œ ëŠ˜ë¦¬ê¸°">â–¼</button>
          </div>
        </div>
        <div class="body" id="archiveBody" contenteditable="true" spellcheck="false"></div>
      </section>
      <section id="libre" class="panel">
        <div class="ph">ë¦¬ë¸Œë ˆ(ììœ  ë©”ëª¨)</div>
        <div class="body" id="libreBody" contenteditable="true" spellcheck="false"></div>
      </section>
    </aside>
  </div>
</div>

<button class="mic" id="micBtn" title="ìŒì„± ì…ë ¥">ğŸ¤</button>
<div class="bubble" id="bubble">ë§ˆì´í¬ë¥¼ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”.</div>

<script>
(() => {
  // ë¶™ì—¬ë„£ê¸° ë°©ì§€
  document.addEventListener('paste', (e) => {
    const t = e.target;
    if (t && (t.tagName === 'TEXTAREA' || t.tagName === 'INPUT' || t.isContentEditable)) {
      e.preventDefault();
    }
  });

  // ì•„ì¹´ì´ë¸Œ ë†’ì´ ì¡°ì ˆ
  const arch = document.getElementById('archive');
  if (arch) {
    arch.querySelectorAll('.btns button').forEach((b) => {
      b.addEventListener('click', () => {
        const d = parseInt(b.dataset.delta || '0', 10);
        const h = Math.max(80, arch.offsetHeight + d);
        arch.style.height = h + 'px';
      });
    });
  }

// â”€â”€ ì¥ ì´ë™(í´ë”í˜• ê²½ë¡œ: ../changsegi001/ êµ¬ì¡°) â”€â”€
const path = location.pathname.replace(/\/+$/,'');
const parts = path.split('/').filter(Boolean);
const folder = parts[parts.length-1] || '';                 // ì˜ˆ: changsegi001
const m2 = folder.match(/^([a-z\-]+)(\d{3})$/i) || [];
const prefix = m2[1] || 'changsegi';
const num    = m2[2] ? parseInt(m2[2],10) : 1;
const pad3   = n => String(n).padStart(3,'0');

const prevEl = document.getElementById('prev');
const nextEl = document.getElementById('next');

if (prevEl){
  if (num > 1){ prevEl.href = `../${prefix}${pad3(num-1)}/`; }
  else { prevEl.classList.add('disabled'); prevEl.removeAttribute('href'); }
}
if (nextEl){
  nextEl.href = `../${prefix}${pad3(num+1)}/`;
}

// (ì„ íƒ) ì£¼ì†Œì°½ ì •ë¦¬: .../index.html â†’ .../
(function(){
  var p = location.pathname;
  if (p.endsWith('/index.html')) {
    var clean = p.slice(0, -'index.html'.length);
    history.replaceState(null, '', clean + location.search + location.hash);
  }
})();

  // ìë™ ì €ì¥/ë³µì›
  const key = (v) => `korean_easy:genesis:${String(ch).padStart(3,'0')}:${v}`;
  ['archiveBody','libreBody'].forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;
    const saved = localStorage.getItem(key(id));
    if (saved !== null) el.innerHTML = saved;
    el.addEventListener('input', () => localStorage.setItem(key(id), el.innerHTML));
  });
  (function bindTA(root=document){
    root.querySelectorAll('textarea').forEach((ta,i)=>{
      const k = key('v' + (ta.dataset.verse || (i+1)));
      const saved = localStorage.getItem(k);
      if (saved !== null) ta.value = saved;
      ta.addEventListener('input', () => localStorage.setItem(k, ta.value));
    });
  })();

  // ë©”ë‰´ ë™ì‘
  (function(){
    const menu = document.getElementById('globalMenu');
    if(!menu) return;
    const btn = menu.querySelector('.menu-btn');
    const list= menu.querySelector('.menu-list');
    btn.addEventListener('click', (e)=>{ e.stopPropagation(); menu.classList.toggle('open'); });
    document.addEventListener('click', ()=> menu.classList.remove('open'));
    list.addEventListener('click', (e)=>{
      const t = e.target.closest('[data-action]');
      if(!t || t.disabled) return;
      const act = t.dataset.action;
      if(act === 'print') window.print();
      else if(act === 'download') alert('ë‹¤ìš´ë¡œë“œëŠ” ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.');
      else if(act === 'backup')   alert('ë°±ì—…/ë¶ˆëŸ¬ì˜¤ê¸°ëŠ” ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.');
      menu.classList.remove('open');
    });
  })();

  // ë§ˆì´í¬ + ë§í’ì„ 
  const micBtn = document.getElementById('micBtn');
  const bubble = document.getElementById('bubble');
  function showToast(msg){
    if(!bubble) return alert(msg);
    bubble.textContent = msg;
    bubble.classList.add('show');
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> bubble.classList.remove('show'), 1600);
  }
  function setListening(on){
    if(!bubble) return;
    bubble.textContent = 'ë…¹ìŒ ì¤‘â€¦';
    bubble.classList.toggle('live', on);
    bubble.classList.toggle('show', on);
  }
  if (micBtn){
    micBtn.addEventListener('click', ()=>{
      const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SR){ showToast('ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); return; }
      const rec = new SR();
      rec.lang='ko-KR'; rec.interimResults=false; rec.continuous=false; rec.maxAlternatives=1;
      rec.onstart = ()=> setListening(true);
      rec.onend   = ()=> setListening(false);
      rec.onerror = e => showToast('ì˜¤ë¥˜: ' + (e.error||'unknown'));
      rec.onresult= e => {
        const t = document.activeElement;
        const txt = e.results[0][0].transcript;
        if (t && t.tagName==='TEXTAREA'){
          const needsSpace = t.value && !/\s$/.test(t.value);
          const pos = t.selectionStart ?? t.value.length;
          t.setRangeText((needsSpace?' ':'')+txt, pos, pos, 'end');
          t.dispatchEvent(new Event('input'));
        } else if (t && t.isContentEditable){
          document.execCommand('insertText', false, txt+' ');
        } else {
          showToast('í•„ì‚¬ì¹¸/ë©”ëª¨ì¹¸ì„ í´ë¦­í•œ ë’¤ ë§ˆì´í¬ë¥¼ ëˆ„ë¥´ì„¸ìš”.');
        }
      };
      try{ rec.start(); }catch(_){}
    });
  }
})();
</script>
</body>
</html>
