<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<meta http-equiv="Cache-Control" content="no-store, max-age=0" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<title>NIV Table of Contents</title>
<style>
  :root{
    --rows:6; --book-h:28px; --gap-x:10px; --gap-y:8px;
    --line:#e5e7eb; --muted:#64748b; --bg:#f8fafc; --chip:#f1f5f9; --text:#0f172a; --tagbg:#eef2f7;
    --maxw:1120px;         /* wider container */
    --top-pad:56px;        /* more space from top */
    --bottom-pad:12px;     /* a bit tighter bottom */
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#fff}
  /* 컨테이너 폭/여백 변수 (없으면 :root에 추가) */
/* :root { --maxw:1120px; --top-pad:56px; --bottom-pad:12px; } */

.wrap{
  max-width:var(--maxw);
  margin:0 auto;
  padding:var(--top-pad) 0 var(--bottom-pad);  /* 좌우 0 */
}

h1{
  margin:0 0 18px;
  font-size:20px;
  font-weight:800;
  letter-spacing:-.02em;
}

/* 섹션 – 바닥 마진 제거 & 섹션 사이 간격은 아래 규칙으로만 */
.section{
  background:var(--bg);
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  margin:0;                                      /* 중요: 기존 0 0 16px 제거 */
  box-shadow:0 1px 0 rgba(15,23,42,.03);
}
.section + .section{ margin-top:28px; }           /* 구약 ↔ 신약 간격 */

.sec-head{ display:flex; align-items:center; gap:10px; margin:0 0 8px; }
.sec-head h2{ margin:0; font-size:14px; }

  .tag{font-size:11px;color:#334155;background:var(--tagbg);border:1px solid var(--line);padding:2px 8px;border-radius:999px}

  .books{display:grid;grid-auto-flow:column;grid-auto-columns:1fr;grid-template-rows:repeat(var(--rows), var(--book-h));gap:var(--gap-y) var(--gap-x)}
  .book-cell{position:relative}
  .book-btn{display:flex;align-items:center;justify-content:center;height:var(--book-h);padding:0 8px;border:1px solid var(--line);border-radius:10px;background:#fff;color:var(--text);font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}
  .book-btn:hover{background:var(--chip)}
  .chap-pop{position:absolute;z-index:10;left:0;right:0;top:calc(var(--book-h) + 6px);background:#fff;border:1px solid var(--line);border-radius:12px;box-shadow:0 6px 20px rgba(15,23,42,.08);padding:8px;display:none;max-height:44vh;overflow:auto}
  .book-cell.open .chap-pop{display:block}
  .chap{display:inline-block;margin:3px 4px;padding:4px 8px;font-size:13px;border:1px solid var(--line);border-radius:10px;text-decoration:none;color:var(--text);background:#fff}
  .chap:hover{background:var(--bg)}
  @media (max-width:560px){ :root{ --rows:10; --book-h:30px; } }
</style>
</head>
<body>
<div class="wrap">
  <h1>NIV Table of Contents</h1>

  <section class="section">
    <div class="sec-head"><h2>Old Testament</h2><span class="tag">39</span></div>
    <div id="ot" class="books"></div>
  </section>

  <section class="section">
    <div class="sec-head"><h2>New Testament</h2><span class="tag">27</span></div>
    <div id="nt" class="books"></div>
  </section>
</div>

<script>
(function(){
  'use strict';

  const PREFIX = "./"; // 상대경로: 리포 하위 경로에서도 안전

  // 구약/신약: [slug, 장 수]
  const OT = [
    ["genesis",50],["exodus",40],["leviticus",27],["numbers",36],["deuteronomy",34],
    ["joshua",24],["judges",21],["ruth",4],["1-samuel",31],["2-samuel",24],
    ["1-kings",22],["2-kings",25],["1-chronicles",29],["2-chronicles",36],
    ["ezra",10],["nehemiah",13],["esther",10],["job",42],["psalms",150],
    ["proverbs",31],["ecclesiastes",12],["song-of-songs",8],["isaiah",66],
    ["jeremiah",52],["lamentations",5],["ezekiel",48],["daniel",12],
    ["hosea",14],["joel",3],["amos",9],["obadiah",1],["jonah",4],
    ["micah",7],["nahum",3],["habakkuk",3],["zephaniah",3],["haggai",2],
    ["zechariah",14],["malachi",4]
  ];

  const NT = [
    ["matthew",28],["mark",16],["luke",24],["john",21],["acts",28],
    ["romans",16],["1-corinthians",16],["2-corinthians",13],["galatians",6],
    ["ephesians",6],["philippians",4],["colossians",4],["1-thessalonians",5],
    ["2-thessalonians",3],["1-timothy",6],["2-timothy",4],["titus",3],
    ["philemon",1],["hebrews",13],["james",5],["1-peter",5],["2-peter",3],
    ["1-john",5],["2-john",1],["3-john",1],["jude",1],["revelation",22]
  ];

  // 현재 페이지 경로로 언어 자동 감지
  const path = location.pathname.toLowerCase();
  let LANG = 'ko';
  if (path.includes('/chinese_cuv/')) LANG = 'zh';
  else if (path.includes('/spanish_nvi/')) LANG = 'es';
  else if (path.includes('/english_niv/')) LANG = 'en';
  else if (path.includes('/korean_easy/')) LANG = 'ko';

  // 언어별 책 이름 (표시용)
  const NAME_KO = {
    "genesis":"창세기","exodus":"출애굽기","leviticus":"레위기","numbers":"민수기","deuteronomy":"신명기",
    "joshua":"여호수아","judges":"사사기","ruth":"룻기","1-samuel":"사무엘상","2-samuel":"사무엘하",
    "1-kings":"열왕기상","2-kings":"열왕기하","1-chronicles":"역대상","2-chronicles":"역대하",
    "ezra":"에스라","nehemiah":"느헤미야","esther":"에스더","job":"욥기","psalms":"시편",
    "proverbs":"잠언","ecclesiastes":"전도서","song-of-songs":"아가","isaiah":"이사야","jeremiah":"예레미야",
    "lamentations":"예레미야애가","ezekiel":"에스겔","daniel":"다니엘","hosea":"호세아","joel":"요엘",
    "amos":"아모스","obadiah":"오바댜","jonah":"요나","micah":"미가","nahum":"나훔",
    "habakkuk":"하박국","zephaniah":"스바냐","haggai":"학개","zechariah":"스가랴","malachi":"말라기",
    "matthew":"마태복음","mark":"마가복음","luke":"누가복음","john":"요한복음","acts":"사도행전",
    "romans":"로마서","1-corinthians":"고린도전서","2-corinthians":"고린도후서","galatians":"갈라디아서",
    "ephesians":"에베소서","philippians":"빌립보서","colossians":"골로새서","1-thessalonians":"데살로니가전서",
    "2-thessalonians":"데살로니가후서","1-timothy":"디모데전서","2-timothy":"디모데후서","titus":"디도서",
    "philemon":"빌레몬서","hebrews":"히브리서","james":"야고보서","1-peter":"베드로전서","2-peter":"베드로후서",
    "1-john":"요한1서","2-john":"요한2서","3-john":"요한3서","jude":"유다서","revelation":"요한계시록"
  };

  const NAME_ZH = {
    "genesis":"创世记","exodus":"出埃及记","leviticus":"利未记","numbers":"民数记","deuteronomy":"申命记",
    "joshua":"约书亚记","judges":"士师记","ruth":"路得记","1-samuel":"撒母耳记上","2-samuel":"撒母耳记下",
    "1-kings":"列王纪上","2-kings":"列王纪下","1-chronicles":"历代志上","2-chronicles":"历代志下",
    "ezra":"以斯拉记","nehemiah":"尼希米记","esther":"以斯帖记","job":"约伯记","psalms":"诗篇",
    "proverbs":"箴言","ecclesiastes":"传道书","song-of-songs":"雅歌","isaiah":"以赛亚书","jeremiah":"耶利米书",
    "lamentations":"耶利米哀歌","ezekiel":"以西结书","daniel":"但以理书","hosea":"何西阿书","joel":"约珥书",
    "amos":"阿摩司书","obadiah":"俄巴底亚书","jonah":"约拿书","micah":"弥迦书","nahum":"那鸿书",
    "habakkuk":"哈巴谷书","zephaniah":"西番雅书","haggai":"哈该书","zechariah":"撒迦利亚书","malachi":"玛拉基书",
    "matthew":"马太福音","mark":"马可福音","luke":"路加福音","john":"约翰福音","acts":"使徒行传",
    "romans":"罗马书","1-corinthians":"哥林多前书","2-corinthians":"哥林多后书","galatians":"加拉太书",
    "ephesians":"以弗所书","philippians":"腓立比书","colossians":"歌罗西书","1-thessalonians":"帖撒罗尼迦前书",
    "2-thessalonians":"帖撒罗尼迦后书","1-timothy":"提摩太前书","2-timothy":"提摩太后书","titus":"提多书",
    "philemon":"腓利门书","hebrews":"希伯来书","james":"雅各书","1-peter":"彼得前书","2-peter":"彼得后书",
    "1-john":"约翰一书","2-john":"约翰二书","3-john":"约翰三书","jude":"犹大书","revelation":"启示录"
  };

  const NAME_ES = {
    "genesis":"Génesis","exodus":"Éxodo","leviticus":"Levítico","numbers":"Números","deuteronomy":"Deuteronomio",
    "joshua":"Josué","judges":"Jueces","ruth":"Rut","1-samuel":"1 Samuel","2-samuel":"2 Samuel",
    "1-kings":"1 Reyes","2-kings":"2 Reyes","1-chronicles":"1 Crónicas","2-chronicles":"2 Crónicas",
    "ezra":"Esdras","nehemiah":"Nehemías","esther":"Ester","job":"Job","psalms":"Salmos",
    "proverbs":"Proverbios","ecclesiastes":"Eclesiastés","song-of-songs":"Cantares","isaiah":"Isaías","jeremiah":"Jeremías",
    "lamentations":"Lamentaciones","ezekiel":"Ezequiel","daniel":"Daniel","hosea":"Oseas","joel":"Joel",
    "amos":"Amós","obadiah":"Abdías","jonah":"Jonás","micah":"Miqueas","nahum":"Nahúm",
    "habakkuk":"Habacuc","zephaniah":"Sofonías","haggai":"Hageo","zechariah":"Zacarías","malachi":"Malaquías",
    "matthew":"Mateo","mark":"Marcos","luke":"Lucas","john":"Juan","acts":"Hechos",
    "romans":"Romanos","1-corinthians":"1 Corintios","2-corinthians":"2 Corintios","galatians":"Gálatas",
    "ephesians":"Efesios","philippians":"Filipenses","colossians":"Colosenses","1-thessalonians":"1 Tesalonicenses",
    "2-thessalonians":"2 Tesalonicenses","1-timothy":"1 Timoteo","2-timothy":"2 Timoteo","titus":"Tito",
    "philemon":"Filemón","hebrews":"Hebreos","james":"Santiago","1-peter":"1 Pedro","2-peter":"2 Pedro",
    "1-john":"1 Juan","2-john":"2 Juan","3-john":"3 Juan","jude":"Judas","revelation":"Apocalipsis"
  };

  const NAME_EN = {
    "genesis":"Genesis","exodus":"Exodus","leviticus":"Leviticus","numbers":"Numbers","deuteronomy":"Deuteronomy",
    "joshua":"Joshua","judges":"Judges","ruth":"Ruth","1-samuel":"1 Samuel","2-samuel":"2 Samuel",
    "1-kings":"1 Kings","2-kings":"2 Kings","1-chronicles":"1 Chronicles","2-chronicles":"2 Chronicles",
    "ezra":"Ezra","nehemiah":"Nehemiah","esther":"Esther","job":"Job","psalms":"Psalms",
    "proverbs":"Proverbs","ecclesiastes":"Ecclesiastes","song-of-songs":"Song of Songs","isaiah":"Isaiah","jeremiah":"Jeremiah",
    "lamentations":"Lamentations","ezekiel":"Ezekiel","daniel":"Daniel","hosea":"Hosea","joel":"Joel",
    "amos":"Amos","obadiah":"Obadiah","jonah":"Jonah","micah":"Micah","nahum":"Nahum",
    "habakkuk":"Habakkuk","zephaniah":"Zephaniah","haggai":"Haggai","zechariah":"Zechariah","malachi":"Malachi",
    "matthew":"Matthew","mark":"Mark","luke":"Luke","john":"John","acts":"Acts",
    "romans":"Romans","1-corinthians":"1 Corinthians","2-corinthians":"2 Corinthians","galatians":"Galatians",
    "ephesians":"Ephesians","philippians":"Philippians","colossians":"Colossians","1-thessalonians":"1 Thessalonians",
    "2-thessalonians":"2 Thessalonians","1-timothy":"1 Timothy","2-timothy":"2 Timothy","titus":"Titus",
    "philemon":"Philemon","hebrews":"Hebrews","james":"James","1-peter":"1 Peter","2-peter":"2 Peter",
    "1-john":"1 John","2-john":"2 John","3-john":"3 John","jude":"Jude","revelation":"Revelation"
  };

  // 언어별 폴더 alias (slug → 실제 폴더 접두어)
  const ALIAS = {
    ko: { "genesis":"changsegi" },   // 예: /korean_easy/changsegi001/
    zh: { "genesis":"chuangshiji" }, // 예: /chinese_cuv/chuangshiji001/
    es: { },                         // 보통 slug 그대로
    en: { }                          // 보통 slug 그대로
  };

  // 현재 언어에 맞는 이름/alias 선택
  const NAME = LANG==='zh' ? NAME_ZH : LANG==='es' ? NAME_ES : LANG==='en' ? NAME_EN : NAME_KO;
  const AL = ALIAS[LANG] || {};

  function makeBook(item){
    const [slug, chapters] = item;
    const cell = document.createElement('div');
    cell.className = 'book-cell';

    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'book-btn';
    btn.textContent = (NAME[slug] || slug);

    const pop = document.createElement('div');
    pop.className = 'chap-pop';

    const folder = (AL[slug] || slug); // 실제 폴더 접두어
    for (let i = 1; i <= chapters; i++) {
      const n = String(i).padStart(3,'0');
      const a = document.createElement('a');
      a.className = 'chap';
      a.textContent = i;
      a.href = PREFIX + folder + n + "/";  // 예: ./changsegi001/
      pop.appendChild(a);
    }

    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.book-cell.open').forEach(el=>el.classList.remove('open'));
      cell.classList.toggle('open');
    });

    cell.append(btn, pop);
    return cell;
  }

  function render(list, id){
    const mount = document.getElementById(id);
    if (!mount) return;
    list.forEach(item => mount.appendChild(makeBook(item)));
  }

  render(OT, 'ot');
  render(NT, 'nt');

  // 바깥 클릭 시 펼침 닫기
  document.addEventListener('click', e=>{
    if (e.target.closest('.book-cell')) return;
    document.querySelectorAll('.book-cell.open').forEach(el=>el.classList.remove('open'));
  });
})();
</script>
</body>
</html>
